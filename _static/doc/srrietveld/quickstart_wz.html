<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Tutorial &mdash; SrRietveld v1.0 documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '#',
        VERSION:     '1.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="SrRietveld v1.0 documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="index.html">SrRietveld v1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="#">Tutorial</a><ul>
<li><a class="reference external" href="#srrietveld-basics">SrRietveld Basics</a></li>
<li><a class="reference external" href="#srrietveld-command-lines">SrRietveld Command Lines</a><ul>
<li><a class="reference external" href="#srr"><tt class="docutils literal"><span class="pre">srr</span></tt></a></li>
<li><a class="reference external" href="#srr-scriptname"><tt class="docutils literal"><span class="pre">srr</span> <span class="pre">&lt;SCRIPTNAME&gt;</span></tt></a></li>
<li><a class="reference external" href="#srr-scriptname-help-or-srr-scriptname-h"><tt class="docutils literal"><span class="pre">srr</span> <span class="pre">&lt;SCRIPTNAME&gt;</span> <span class="pre">--help</span></tt> or <tt class="docutils literal"><span class="pre">srr</span> <span class="pre">&lt;SCRIPTNAME&gt;</span> <span class="pre">-h</span></tt></a><ul>
<li><a class="reference external" href="#calculating-pattern">Calculating Pattern</a></li>
<li><a class="reference external" href="#refinement-on-a-single-measurement-srr-refine">Refinement on a single measurement <tt class="docutils literal"><span class="pre">srr</span> <span class="pre">refine</span></tt></a></li>
<li><a class="reference external" href="#plotting-pattern-from-refinement-result-srr-plotpattern">Plotting Pattern From Refinement Result <tt class="docutils literal"><span class="pre">srr</span> <span class="pre">plotpattern</span></tt></a></li>
<li><a class="reference external" href="#viewing-refined-parameter-value-from-refinement-result-srr-viewrefineresult">Viewing Refined Parameter Value From Refinement Result <tt class="docutils literal"><span class="pre">srr</span> <span class="pre">viewrefineresult</span></tt></a></li>
<li><a class="reference external" href="#saving-configuration-from-saved-project-file-srr-saveconfig">Saving configuration from saved project file <tt class="docutils literal"><span class="pre">srr</span> <span class="pre">saveconfig</span></tt></a></li>
<li><a class="reference external" href="#sequential-fitting-on-a-series-of-measurements">Sequential fitting on a series of measurements</a></li>
<li><a class="reference external" href="#view-refinement-results-of-sequential-refinements">View refinement results of sequential refinements</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference external" href="#tutorial-on-x-ray-diffraction-data">Tutorial On X-ray Diffraction Data</a></li>
</ul>
</li>
</ul>

            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/quickstart_wz.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="tutorial">
<span id="quickstart"></span><h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h1>
<div class="section" id="srrietveld-basics">
<h2>SrRietveld Basics<a class="headerlink" href="#srrietveld-basics" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">A command line version of SrRietveld is currently available. A graphical user interface will be developed in the future release.</p>
</li>
<li><p class="first">The structure data, refinement strategy, and instrument data will be stored in XML files, and the files will be passed to the program as option values</p>
</li>
<li><p class="first">The SrRietveld input files are in XML format. The syntax of the XML files is illustrated in this user manual. There are some tools provided in SrRietveld to generate XML file templates.</p>
</li>
<li><p class="first">There are three types of input files:</p>
<ul>
<li><p class="first"><em>Instrument file</em> &#8211; defining the parameters related to the instrument and experiment by instrument scientists.</p>
<p>Importance: <strong>required</strong></p>
</li>
<li><p class="first"><em>Crystal structure model file</em> &#8211; defining the crystal structure model to be refined.</p>
<p>Importance: <strong>required</strong></p>
</li>
<li><p class="first"><em>Refinement strategy file</em> &#8211; defining the sequence to refine parameters.</p>
<p>Importance: <strong>optional</strong></p>
<p><em>If this file is not given, SrRietveld will perform the refinement by using a default refinement strategy.</em></p>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="srrietveld-command-lines">
<h2>SrRietveld Command Lines<a class="headerlink" href="#srrietveld-command-lines" title="Permalink to this headline">¶</a></h2>
<p><em>This introduction is base on Linux / Mac machines. Current release of SrRietveld is not available in Windows</em></p>
<div class="section" id="srr">
<h3><tt class="docutils literal"><span class="pre">srr</span></tt><a class="headerlink" href="#srr" title="Permalink to this headline">¶</a></h3>
<p>After SrRietveld is correctly installed in the computer, the main command for SrRietveld is <tt class="docutils literal"><span class="pre">srr</span></tt>.</p>
<p>The format to run the &#8216;&#8217;srr&#8217;&#8217; command should be,:</p>
<div class="highlight-python"><pre>srr [SCRIPT NAME] [OPTIONs]</pre>
</div>
<p>The <em>SCRIPT NAME</em> is a work or abbreviation to tell the program what kind of task to complete. Then the necessary data will be passed through  <a href="#id1"><span class="problematic" id="id2">*</span></a>OPTION*s. To get the full list of available <a href="#id3"><span class="problematic" id="id4">*</span></a>SCRIPT NAME*s, open a terminal, type in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">srr</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">srr</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<p>a list of script names, their abbreviations, and a short description for each will be listed in the terminal.</p>
<p>Similarly, to get immediate help on every script name, simply type in:</p>
<p>srr [SCRIPT NAME] &#8211;help</p>
</div>
<div class="section" id="srr-scriptname">
<h3><tt class="docutils literal"><span class="pre">srr</span> <span class="pre">&lt;SCRIPTNAME&gt;</span></tt><a class="headerlink" href="#srr-scriptname" title="Permalink to this headline">¶</a></h3>
<p>If a script name is given, SrRietveld will prompt the help information if the script name is correct.</p>
<ul>
<li><p class="first">Example 1:</p>
<div class="highlight-python"><pre>``&gt; srr calculatepattern``</pre>
</div>
<p>Output:</p>
<div class="highlight-python"><pre>Automatic Launched Refinement On Single Refinement

calculatepattern -h  For Help</pre>
</div>
</li>
<li><p class="first">Example 2:</p>
<div class="highlight-python"><pre>``&gt; srr cal``</pre>
</div>
<p>Output:</p>
<div class="highlight-python"><pre>Automatic Launched Refinement On Single Refinement

cal        -h  For Help</pre>
</div>
</li>
<li><p class="first">Example 3:</p>
<div class="highlight-python"><pre>``&gt; srr xyz``</pre>
</div>
<p>Output:</p>
<div class="highlight-python"><pre>Script xyz        is not supported.  Programm is quit
Usage: srr [SCRIPT NAME] [OPTION]...
SrRietveld User Interface Application.
Run the task defined by the SCRIPT NAME, where the specifications are listed in OPTIONs.

Supported script names include:
    cal   , calculatepattern         Simulate diffraction pattern
    pp    , plotpattern              Plot the refinement result (pattern) from
                                     script 'refine'
    refine, refine                   Multiple step refinement on single
                                     experiment or co-refinement on several
                                     data sets
    sc    , saveconfig               Save configuration XML file from existing
                                     files to set up SrRietveld
    seqfit, sequentialfit            Sequential fitting on data sets from a
                                     series of experiements
    vrr   , viewrefineresult         Viewing the result coming from script
                                     'refine'
    vspr  , viewsamplingfitresult    Viewing the result coming from a series
                                     of sampling refinements
    vsrr  , viewsequentialfitresult  Viewing the result coming from script
                                     'sequentialfit'

        -h, --help
              info    display this help and exit

Note that in parenthesis are the corresponding shortened name of the application script</pre>
</div>
</li>
</ul>
</div>
<div class="section" id="srr-scriptname-help-or-srr-scriptname-h">
<h3><tt class="docutils literal"><span class="pre">srr</span> <span class="pre">&lt;SCRIPTNAME&gt;</span> <span class="pre">--help</span></tt> or <tt class="docutils literal"><span class="pre">srr</span> <span class="pre">&lt;SCRIPTNAME&gt;</span> <span class="pre">-h</span></tt><a class="headerlink" href="#srr-scriptname-help-or-srr-scriptname-h" title="Permalink to this headline">¶</a></h3>
<p>This command will print the help information of the specified script.</p>
<ul>
<li><p class="first">Example 1:</p>
<div class="highlight-python"><pre>&gt; srr calculatepattern --help</pre>
</div>
<p>or:</p>
<div class="highlight-python"><pre>&gt; srr cal --help</pre>
</div>
<p>Output:</p>
<div class="highlight-python"><pre>Usage: cal [options]

Options:
  -h, --help            show this help message and exit
  -i INSTRUMENT, --instrument=INSTRUMENT
                        (1) Name of Instrument (2) Name of Instrument XML File
  --pcr=PCRFILENAME     Name of Fullprof pcr File
  --iparm=IPARMFILENAME
                        Name of GSAS iparm Instrument File
  -s STRUCTUREXML, --structure=STRUCTUREXML
                        Name of CIF File (.cif) or SrRietveld Crystal
                        Structure XML File (.xml)
  --bank=BANKS          Bank(s) to refine in T.O.F. data
  -b BACKGROUNDFNAME, --background=BACKGROUNDFNAME
                        Name of Data File Containing Background Parameter
  -v SAVEFILENAME, --saveas=SAVEFILENAME
                        Name of Output File
  -e ENGINE, --engine=ENGINE
                        Type of Refinement Engine (i.e.,Refinement Backend).
                        Fullprof or GSAS
  --range=RANGE         Range of Calculated Pattern.  Using --range=begin,end
  --scale=SCALE         Scale factor
  -a, --autoscale       Automatically scale the calcualted pattern to input
                        pattern for bettern comparison
  --compare             Compare with input data file in plot</pre>
</div>
</li>
</ul>
<div class="section" id="calculating-pattern">
<h4>Calculating Pattern<a class="headerlink" href="#calculating-pattern" title="Permalink to this headline">¶</a></h4>
<p>The first step is to calculate the pattern according to the proposed structure model,
to make sure that the model is not obviously incorrect.</p>
<p>The proposed structure of NaCl is the structure at room temperature.
Therefore, by referring to NaCl_Info_All.txt, we choose
Data/NaCl_ramp01_10f_200ms_1059.chi as the pattern to compare.</p>
<blockquote>
<ol class="arabic">
<li><p class="first">The simplest option that user can use:</p>
<div class="highlight-python"><pre>&gt; srr calculatepattern -s s_nacl.xml</pre>
</div>
<p>The instrument profile will be searched in the current working directory,
i.e., <em>i_rapdf_idd11.xml</em></p>
</li>
<li><p class="first">User is suggested to specify an instrument file instead:</p>
<div class="highlight-python"><pre>&gt; srr calculatepattern -i i_rapdf_idd11_cal.xml -s s_nacl.xml</pre>
</div>
</li>
<li><p class="first">SrRietveld pattern calculation provides more functionalities including</p>
<ul class="simple">
<li>compare the calculated pattern to a given data file;</li>
</ul>
<p>Try the complete command as:</p>
<div class="highlight-python"><pre>&gt; srr calculatepattern -i i_rapdf_idd11_cal.xml -s s_nacl.xml \
  -d Data/NaCl_ramp01_10f_200ms_1059.chi \
  -b backgroundtemp.dat --scale=1.0E-6</pre>
</div>
<p>Or:</p>
<div class="highlight-python"><pre>&gt; srr calculatepattern --instrument=i_rapdf_idd11_cal.xml --structure=s_nacl.xml \
  --data=Data/NaCl_ramp01_10f_200ms_1059.chi --background=backgroundtemp.dat \
  --scale=1.0E-6</pre>
</div>
<p>..image:: figures/f_calculatepattern.png</p>
<p>The calculated pattern and the real experimental pattern will be plotted against each other.
If the magnitude of them are not close enough, the scale factor can be tuned by inputting
an appropriate value with option &#8211;scale.</p>
<p>The &#8211;scale factor should not be large, or the calculated pattern may be overflow.</p>
</li>
</ol>
</blockquote>
</div>
<div class="section" id="refinement-on-a-single-measurement-srr-refine">
<h4>Refinement on a single measurement <tt class="docutils literal"><span class="pre">srr</span> <span class="pre">refine</span></tt><a class="headerlink" href="#refinement-on-a-single-measurement-srr-refine" title="Permalink to this headline">¶</a></h4>
<p>It is better to do Rietveld refinement on a single diffraction measurement,
before starting the sequential refinement.</p>
<p>Because the starting structure model is at room temperature,
we pickup the data set <em>NaCl_ramp01_10f_200ms_1059.chi</em>,
which was measured at room temperature.</p>
<ol class="arabic">
<li><p class="first">Try one of the following commands, which are equivalent to SrRietveld:</p>
<div class="highlight-python"><pre>&gt; srr refine -i i_rapdf_idd11_cal.xml -s s_nacl.xml -d Data/NaCl_ramp01_10f_200ms_1059.chi \
  -b backgrountemp.dat -v refine_1059.proj
&gt; srr refine --instrument=i_rapdf_idd11_cal.xml --structure=s_nacl.xml \
  --data=Data/NaCl_ramp01_10f_200ms_1059.chi --background=backgrountemp.dat \
  --saveas=refine_1059.proj</pre>
</div>
<p>The refinement will be launched with the convergence strategy defined in SrRietveld.
And the refinement result will be saved in file refine_1059.proj
The refinement engine in default is Fullprof.</p>
<p>..image:: figures/f_refineprocess.png</p>
</li>
<li><p class="first">If you do not want to use the automatic background selection provided in SrRietveld,
but rather trust the background points selected by yourself,
you can add one more option <tt class="docutils literal"><span class="pre">-u</span></tt> or <tt class="docutils literal"><span class="pre">--useinputbackground</span></tt>:</p>
<div class="highlight-python"><pre>&gt; srr refine -i i_rapdf_idd11_cal.xml -s s_nacl.xml -d Data/NaCl_ramp01_10f_200ms_1059.chi \
  -b backgrountemp.dat -v refine_1059.proj -u
&gt; srr refine --instrument=i_rapdf_idd11_cal.xml --structure=s_nacl.xml \
  --data=Data/NaCl_ramp01_10f_200ms_1059.chi --background=backgrountemp.dat \
  --saveas=refine_1059.proj --useinputbackground</pre>
</div>
<p>The result can be different if you use the background selected by SrRietveld or by yourself.</p>
</li>
<li><p class="first">The default refinement backend is FullProf.
You can specify the refinement backend by option <tt class="docutils literal"><span class="pre">--engine</span></tt> (<tt class="docutils literal"><span class="pre">-e</span></tt>).
The supported engine names are</p>
<ul class="simple">
<li>Fullprof</li>
<li>GSAS</li>
</ul>
<p>For example, if you want to use GSAS as the refinement backend, the commands can be:</p>
<div class="highlight-python"><pre>&gt; srr refine -i i_rapdf_idd11_cal.xml -s s_nacl.xml -d Data/NaCl_ramp01_10f_200ms_1059.chi \
  -b backgrountemp.dat -v refine_1059.proj -u -e gsas
&gt; srr refine --instrument=i_rapdf_idd11_cal.xml --structure=s_nacl.xml \
  --data=Data/NaCl_ramp01_10f_200ms_1059.chi --background=backgrountemp.dat \
  --saveas=refine_1059.proj --useinputbackground --engine=gsas</pre>
</div>
</li>
</ol>
</div>
<div class="section" id="plotting-pattern-from-refinement-result-srr-plotpattern">
<h4>Plotting Pattern From Refinement Result <tt class="docutils literal"><span class="pre">srr</span> <span class="pre">plotpattern</span></tt><a class="headerlink" href="#plotting-pattern-from-refinement-result-srr-plotpattern" title="Permalink to this headline">¶</a></h4>
<p>Script <em>plotpattern</em> allows the user to view the calculated diffraction pattern,
the observed one and the difference between them.</p>
<ol class="arabic">
<li><p class="first">User can view the diffraction pattern of the final result (last round) as:</p>
<div class="highlight-python"><pre>&gt; srr plotpattern --project=refine_1059.proj
&gt; srr plotpattern -p refine_1059.proj</pre>
</div>
<p>..image:: figures/f_refineplotsingle_best.png</p>
</li>
<li><p class="first">User can view the diffraction pattern of at a specific step by option <tt class="docutils literal"><span class="pre">--step</span></tt>,
such as:</p>
<div class="highlight-python"><pre>&gt; srr plotpattern -p refine_1059.proj --step=3
&gt; srr plotpattern --project=refine_1059.proj --step=3</pre>
</div>
</li>
</ol>
<blockquote>
..image:: figures/f_refineplotsingle_step3.png</blockquote>
<ol class="arabic" start="3">
<li><p class="first">The user can also require the patterns to be plot in d-spacing by option
<tt class="docutils literal"><span class="pre">--dspacing</span></tt>.
For example, in this case:</p>
<div class="highlight-python"><pre>&gt; srr plotpattern --project=refine_1059.proj --dspacing</pre>
</div>
<p>..image:: figures/f_refineplotsingle_best_dspacing.png</p>
</li>
</ol>
</div>
<div class="section" id="viewing-refined-parameter-value-from-refinement-result-srr-viewrefineresult">
<h4>Viewing Refined Parameter Value From Refinement Result <tt class="docutils literal"><span class="pre">srr</span> <span class="pre">viewrefineresult</span></tt><a class="headerlink" href="#viewing-refined-parameter-value-from-refinement-result-srr-viewrefineresult" title="Permalink to this headline">¶</a></h4>
<p>User can look up a parameter for its value after refinement by command
<tt class="docutils literal"><span class="pre">srr</span> <span class="pre">viewrefineresult</span></tt>.</p>
<ol class="arabic">
<li><p class="first">Example 1: read chi^2:</p>
<div class="highlight-python"><pre>&gt; srr viewrefineresult -p refine_1059.proj --parameter=chi2`
&gt; srr viewrefineresult --project=refine_1059.proj --parameter=chi2`</pre>
</div>
<p>..image:: figures/f_refineresult_chi2.png</p>
</li>
<li><p class="first">Example 2: read value of Biso of all atoms:</p>
<div class="highlight-python"><pre>&gt; srr viewrefineresult -p refine_1059.proj --parameter=biso
&gt; srr viewrefineresult -project=refine_1059.proj --parameter=biso</pre>
</div>
</li>
</ol>
<blockquote>
<p>These two equivalent commands will give the Biso of both Na and Cl atoms
of the step at which the best convergence is made.</p>
<p>..image:: figures/f_refineresult_step3.png</p>
</blockquote>
<ol class="arabic">
<li><p class="first">Example 3: Read value of Biso of atom <em>Na</em>:</p>
<div class="highlight-python"><pre>&gt; srr viewrefineresult -p refine_1059.proj --parameter=biso --atom=Na
&gt; srr viewrefineresult -project=refine_1059.proj --parameter=biso --atom=Na</pre>
</div>
</li>
</ol>
<blockquote>
These will show the parameters&#8217; values with uncertainties.
..image:: figures/f_refineresult_step3.png</blockquote>
<ol class="arabic simple">
<li>If the user is interested to see how one specific parameters changes
along refinement, he/she can add an option <tt class="docutils literal"><span class="pre">--step=all</span></tt></li>
</ol>
</div>
<div class="section" id="saving-configuration-from-saved-project-file-srr-saveconfig">
<h4>Saving configuration from saved project file <tt class="docutils literal"><span class="pre">srr</span> <span class="pre">saveconfig</span></tt><a class="headerlink" href="#saving-configuration-from-saved-project-file-srr-saveconfig" title="Permalink to this headline">¶</a></h4>
<p>Script <em>saveconfig</em> is multiple purposed to let the user to</p>
<ol class="arabic simple">
<li>extract the information from a refinement project file to a SrRietveld recognizable XML file,
including<ul>
<li>instrument file</li>
<li>structure file</li>
</ul>
</li>
<li>generate the template of SrRietveld recognizable XML file, including<ul>
<li>instrument file</li>
<li>structure file</li>
<li>...</li>
</ul>
</li>
</ol>
<p>After a refinement is completed and saved to a SrRietveld project file,
user can export the refined crystal structure to a SrRietveld structure file in XML format,
which can be used as an input for future refinement.</p>
<p><tt class="docutils literal"><span class="pre">&gt;</span> <span class="pre">srr</span> <span class="pre">saveconfig</span> <span class="pre">-p</span> <span class="pre">refine_1059.proj</span> <span class="pre">-s</span> <span class="pre">nacl259.xml</span></tt></p>
<p>User can also export the refinement strategy file,
such that she/he can modify to the refinement strategy, including sequence of refinement guides,
to refine the structure model again for better convergence.</p>
<p><tt class="docutils literal"><span class="pre">srr</span> <span class="pre">saveconfig</span> <span class="pre">-p</span> <span class="pre">refine_1059.proj</span> <span class="pre">-r</span> <span class="pre">refinestrategy_userdefine.xml</span></tt></p>
<p>The user can use any text editor or specific XML editor to modify the XML containing
refinement strategy.</p>
<p>For example, the user can do further refinement based on the previous refinement result:</p>
<p><tt class="docutils literal"><span class="pre">&gt;</span> <span class="pre">srr</span> <span class="pre">refine</span> <span class="pre">-i</span> <span class="pre">i_rapdf_idd11_cal.xml</span> <span class="pre">-s</span> <span class="pre">s_nacl259.xml</span> <span class="pre">-d</span> <span class="pre">Data/NaCl_ramp01_10f_200ms_1059.chi</span> <span class="pre">-b</span> <span class="pre">backgrountemp.dat</span> <span class="pre">-v</span> <span class="pre">refine_1059.proj</span></tt></p>
<p>or if with other refinement strategy</p>
<p><tt class="docutils literal"><span class="pre">&gt;</span> <span class="pre">srr</span> <span class="pre">refine</span> <span class="pre">-i</span> <span class="pre">i_rapdf_idd11_cal.xml</span> <span class="pre">-s</span> <span class="pre">s_nacl259.xml</span> <span class="pre">-d</span> <span class="pre">Data/NaCl_ramp01_10f_200ms_1059.chi</span> <span class="pre">-b</span> <span class="pre">backgrountemp.dat</span> <span class="pre">-v</span> <span class="pre">refine_1059b.proj</span> <span class="pre">-r</span> <span class="pre">refinestrategy_userdefine.xml</span></tt></p>
</div>
<div class="section" id="sequential-fitting-on-a-series-of-measurements">
<h4>Sequential fitting on a series of measurements<a class="headerlink" href="#sequential-fitting-on-a-series-of-measurements" title="Permalink to this headline">¶</a></h4>
<p>SrRietveld supports sequential refinement on a set of measurements on same material
but in different environment, for example, temperature or pressure.</p>
<p>In this tutorial, it is a temperature series.</p>
<p>Before starting the refinement, the user should have</p>
<ol class="arabic simple">
<li>calibrated instrument file: i_rapdf_idd11_cal.xml</li>
<li>proposed structure model file: s_nacl.xml, or s_nacl_X.xml that is exported
from the result of previous refinement, for example refine_1059.proj or refine_1059b.proj</li>
<li>data-environment parameter value list file: NaCl_Info_All.txt</li>
</ol>
<p><tt class="docutils literal"><span class="pre">&gt;</span> <span class="pre">srr</span> <span class="pre">sequentialfit</span> <span class="pre">-i</span> <span class="pre">i_radpf_idd11_cal.xml</span> <span class="pre">-s</span> <span class="pre">s_nacl_02.xml</span> <span class="pre">-l</span> <span class="pre">Data</span> <span class="pre">-f</span> <span class="pre">NaCl_Info_All.txt</span> <span class="pre">-b</span> <span class="pre">backgroundtemp.dat</span> <span class="pre">-n</span> <span class="pre">T</span> <span class="pre">--refinedirection=down</span> <span class="pre">--start=295.0</span> <span class="pre">-v</span> <span class="pre">seqrefine_nacl.proj</span></tt></p>
<p>By this command, SrRietveld will refine all the measurements starting from 295.0 K down to the lowest temperature
measured int the experiment, while all the data are stored in directory Data.
The refinement engine in default is Fullprof.</p>
<p>With additional option,
<tt class="docutils literal"><span class="pre">--engine=gsas</span></tt> or <tt class="docutils literal"><span class="pre">-e</span> <span class="pre">gsas</span></tt>
SrRietveld will use GSAS as refinement engine.</p>
<p>SrRietveld&#8217;s sequential refinement will save the refinement results in several files and directories.</p>
<p>In the example just shown, SrRietveld will</p>
<ol class="arabic simple">
<li>save all the refinement history and parameter to a single file, seqrefine_nacl.proj.
It will be a large file, but with all information</li>
<li>generate a directory named, seqrefine_nacl</li>
<li>generate a light-weight XML file in directory seqrefine_nacl.
In this XML file, only the information of chi2, Rwp, and crystal structures are saved.</li>
<li>the project files of refinement on every single measurement.
These files will be stored in directory seqrefine_nacl.</li>
</ol>
</div>
<div class="section" id="view-refinement-results-of-sequential-refinements">
<h4>View refinement results of sequential refinements<a class="headerlink" href="#view-refinement-results-of-sequential-refinements" title="Permalink to this headline">¶</a></h4>
<p>The user will use a different script: srr viewsequentialrefineresult.py (srvsr) to
look up the parameters from the result of sequential fitting.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">&gt;</span> <span class="pre">srr</span> <span class="pre">viewsequentialfitresult</span> <span class="pre">-o</span> <span class="pre">seqrefine_nacl</span> <span class="pre">--parameter=chi2</span> <span class="pre">-p</span></tt>
list chi^2 in all the refinements</li>
<li><tt class="docutils literal"><span class="pre">&gt;</span> <span class="pre">srr</span> <span class="pre">viewsequentialfitresult</span> <span class="pre">-o</span> <span class="pre">seqrefine_nacl</span> <span class="pre">--parameter=biso</span> <span class="pre">-p</span></tt>
: list Biso of all the atoms in all the refinements</li>
<li><tt class="docutils literal"><span class="pre">&gt;</span> <span class="pre">srr</span> <span class="pre">viewsequentialfitresult</span> <span class="pre">-o</span> <span class="pre">seqrefine_nacl</span> <span class="pre">--parameter=biso</span> <span class="pre">--atom=Cl</span> <span class="pre">-p</span></tt>
: list Biso of atom Cl in all the refinements</li>
</ul>
<p>The option -p is used to plot the result.</p>
</div>
</div>
</div>
<div class="section" id="tutorial-on-x-ray-diffraction-data">
<h2>Tutorial On X-ray Diffraction Data<a class="headerlink" href="#tutorial-on-x-ray-diffraction-data" title="Permalink to this headline">¶</a></h2>
<p>The purpose of this example is to familiarize the novice user with the
SrRietveld basics.</p>
<p>The goal is to refine a couple of hundreds of measurements on NaCl
low resolution X-ray powder diffraction data collected at
beamline 11ID-B at at the Advanced Photon Source at Argonne National Laboratory.</p>
<p>The data files can be</p>
<ol class="arabic simple">
<li><a class="reference external" href="http://dev.danse">downloaded</a></li>
<li>copied from diffpy.srrietveld package.</li>
</ol>
<p>Select the directory <em>RAPDF/NaCl</em></p>
<p>Inside, you will find</p>
<ol class="arabic simple">
<li>i_rapdf_idd11_cal.xml: the instrument XML file calibrated using Ni data;</li>
<li>s_nacl.xml: the structure of NaCl obtained from the literature;</li>
<li>backgroundtemp.txt:  a background file;</li>
<li>NaCl_Inof_All.txt: 2 column file listing the data file name and their corresponding temperature;</li>
<li>Directory Data/ containing 321 data sets measured at 321 different temperatures.</li>
</ol>
<p>More tutorial can be found in ???
There are some command scripts files with posfix sh.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li><a href="index.html">SrRietveld v1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2011, Peng Tian, Wenduo Zhou, Jiwu Liu, Yingrui Shang, Chris Farrow, Pavol Juhas, Emil Bozin, and Simon Billinge.
      Last updated on Jun 16, 2011.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.4.
    </div>
  </body>
</html>