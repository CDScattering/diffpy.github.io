Installation
========================================================================


Software requirements
------------------------------------------------------------------------

PDFgetX3 has been written in Python programming language, therefore
to use the software, you must have Python 2.6 or
Python 2.7 installed. [#fpy3]_
In addition, the following third-party Python libraries are
also required:

* distribute - tools for installing Python packages
* NumPy - library for scientific computing with Python
* matplotlib - Python plotting library
* IPython - enhanced interactive Python shell
* PyReadline - required for a full IPython functionality on Windows

Standard Python releases can be obtained from
http://www.python.org/download/.
The third-party libraries can be found at the
`Python Package Index <http://pypi.python.org/pypi>`_
or using any Internet search engine.

Another, more convenient option is to obtain science-oriented Python
distributions, such as `PythonXY <https://code.google.com/p/pythonxy/>`_
or `Enthought Canopy <http://www.enthought.com/>`_.  These distributions
already include all the necessary libraries, so the required Python
software can be all installed in one step.

On Linux operating systems the third-party libraries are usually
included in a system software package repository.  For example on an
Ubuntu Linux computer the software dependencies can be all installed
with a single shell command ::

  sudo apt-get install \
    python-distribute python-numpy python-matplotlib ipython

This may be, of course, just as well accomplished using the GUI
driven Synaptic package manager.  Other Linux
distributions may use different software management tools,
but the names of the necessary packages should be very similar
to those above.

On Windows operating system, it may be necessary to add the
``C:\Python27`` directory and the scripts directory
``C:\Python27\Scripts`` to the system :envvar:`!PATH`.
Some Python distributions may already do that as a part of their
installation process.  The easiest way to check is to start the
:program:`Command Prompt`, type there ``python`` and see if this
starts the Python interpreter.


PDFgetX3 installation
------------------------------------------------------------------------

PDFgetX3 is distributed as a Python egg package, which can be obtained
from the `Columbia Flintbox
<http://columbia.flintbox.com/public/project/22569/>`_.
Once all the required software is in
place, start the command prompt on Windows or a Unix terminal on Linux
or Mac, navigate to the directory that contains the egg file and
execute the following command::

  easy_install diffpy.pdfgetx-VERSION-pyX.Y.egg

Here VERSION needs to be replaced to match the actual filename,
and X.Y is the Python version, for example 2.7.  It is critical to
use the correct egg file for your Python version as the program
would not work otherwise.  On Linux and Mac operating systems the
installation may need to run with root user privileges, for example, by
prepending ``sudo`` to the command line above.
If root access is not available, use the
easy_install options :option:`!--prefix` or
:option:`!--install-dir` to install PDFgetX3 to a user-writable
directory.

To verify if pdfgetx3 has been correctly installed,
type the following command::

  pdfgetx3 --version

This should display the software version, which should be
the same as the VERSION string in the egg file name.
The installation also includes a :command:`plotdata`
command for an easy plotting of text data files.  To verify
if plotdata works, run the ``plotdata --version`` command.


IPython magic command
------------------------------------------------------------------------

These instructions are intended for IPython users who would like to
integrate PDFgetX3 into their IPython environment.  If you don't plan
to use IPython, you can safely ignore this section.

When pdfgetx3 is run in an interactive mode, it starts IPython
interactive shell and defines an extra ``%pdfgetx3``
magic command within the IPython session.  The IPython magic
commands are not valid Python code, but work in a similar
fashion as standard shell commands.  The ``%pdfgetx3`` magic can
be thus used with the same options and arguments as if run from
the shell.  This is useful for processing more files, while
preserving all plots or variables that were already created
within the IPython session.

The ``%pdfgetx3`` magic command can be defined permanently so it is
available in any IPython sessions.  To make the ``%pdfgetx3`` command
permanent, first check what is the IPython version.  If it is 0.11 or
later,

#.  find the ``profile_default/ipython_config.py`` file and open it
    in a text editor.  If that file does not exists, it can be
    generated by executing ::

      ipython profile create

    in a system shell.

#.  navigate to the paragraph that contains the
    :py:data:`!c.InteractiveShellApp.extensions` and add there
    the following line::

      c.InteractiveShellApp.extensions = ['diffpy.pdfgetx.ipy_pdfgetx3']

    There must be no leading indent, i.e., the text must start at the
    very first column.

The magic commands can be also defined in an older IPython 0.10,
but the procedure is slightly different.  The trick is to find the
``HOME/.ipython/ipy_user_conf.py`` file and add there the following
statement ::

  import diffpy.pdfgetx.ipy_pdfgetx3

Make sure this line has a correct indentation, i.e., it has the same
amount of leading whitespace, as do the surrounding lines.


.. rubric:: Footnotes

.. [#fpy3] Python 3 is not supported yet.
